{"version":3,"sources":["bullet.js"],"names":["mEmitter","require","config","cc","Class","extends","Component","properties","damage","speed","_gameState","gameState","PLAYING","_updateGameState","onLoad","updateGameState","bind","instance","registerEvent","event","UPDATE_GAMESTATE","data","start","onCollisionEnter","other","self","a","node","group","onBulletKilled","removeEvent","destroy","update","dt","y"],"mappings":";;;;;;AAAA,IAAMA,WAAWC,QAAQ,UAAR,CAAjB;AACA,IAAMC,SAASD,QAAQ,QAAR,CAAf;AACAE,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;AAELC,gBAAY;AACRC,gBAAQ,CADA;AAERC,eAAO,CAFC;AAGRC,oBAAYR,OAAOS,SAAP,CAAiBC,OAHrB;AAIRC,0BAAkB;AAJV,KAFP;AAQLC,UARK,oBAQI;AACL,aAAKD,gBAAL,GAAwB,KAAKE,eAAL,CAAqBC,IAArB,CAA0B,IAA1B,CAAxB;AACAhB,iBAASiB,QAAT,CAAkBC,aAAlB,CAAgChB,OAAOiB,KAAP,CAAaC,gBAA7C,EAA+D,KAAKP,gBAApE;AACH,KAXI;AAYLE,mBAZK,2BAYWM,IAZX,EAYiB;AAClB,aAAKX,UAAL,GAAkBW,IAAlB;AACH,KAdI;AAeLC,SAfK,mBAeG,CAEP,CAjBI;;AAkBLC,sBAAkB,0BAASC,KAAT,EAAgBC,IAAhB,EAAsB;AACpC,YAAIC,IAAIF,MAAMG,IAAN,CAAWC,KAAX,IAAoB,OAA5B;AACA,YAAIJ,MAAMG,IAAN,CAAWC,KAAX,IAAoB,OAAxB,EAAiC;AAC7B,iBAAKC,cAAL;AAEH;AACJ,KAxBI;AAyBLA,kBAzBK,4BAyBY;AACb7B,iBAASiB,QAAT,CAAkBa,WAAlB,CAA8B5B,OAAOiB,KAAP,CAAaC,gBAA3C,EAA6D,KAAKP,gBAAlE;AACA,aAAKc,IAAL,CAAUI,OAAV;AAEH,KA7BI;AA8BLC,UA9BK,kBA8BEC,EA9BF,EA8BM;AACP,YAAI,KAAKvB,UAAL,IAAmBR,OAAOS,SAAP,CAAiBC,OAAxC,EACI,KAAKe,IAAL,CAAUO,CAAV,IAAe,KAAKzB,KAApB;AACJ,YAAI,KAAKkB,IAAL,CAAUO,CAAV,IAAe,GAAnB,EAAwB;AACpB,iBAAKL,cAAL;AACH;AACJ;AApCI,CAAT","file":"bullet.js","sourceRoot":"..\\..\\..\\..\\assets\\scripts","sourcesContent":["const mEmitter = require(\"mEmitter\");\r\nconst config = require(\"config\");\r\ncc.Class({\r\n    extends: cc.Component,\r\n    properties: {\r\n        damage: 1,\r\n        speed: 5,\r\n        _gameState: config.gameState.PLAYING,\r\n        _updateGameState: null\r\n    },\r\n    onLoad() {\r\n        this._updateGameState = this.updateGameState.bind(this)\r\n        mEmitter.instance.registerEvent(config.event.UPDATE_GAMESTATE, this._updateGameState)\r\n    },\r\n    updateGameState(data) {\r\n        this._gameState = data\r\n    },\r\n    start() {\r\n\r\n    },\r\n    onCollisionEnter: function(other, self) {\r\n        let a = other.node.group == \"enemy\"\r\n        if (other.node.group == \"enemy\") {\r\n            this.onBulletKilled()\r\n\r\n        }\r\n    },\r\n    onBulletKilled() {\r\n        mEmitter.instance.removeEvent(config.event.UPDATE_GAMESTATE, this._updateGameState)\r\n        this.node.destroy();\r\n\r\n    },\r\n    update(dt) {\r\n        if (this._gameState == config.gameState.PLAYING)\r\n            this.node.y += this.speed;\r\n        if (this.node.y >= 460) {\r\n            this.onBulletKilled()\r\n        }\r\n    },\r\n});"]}