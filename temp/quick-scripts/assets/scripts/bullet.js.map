{"version":3,"sources":["bullet.js"],"names":["mEmitter","require","config","cc","Class","extends","Component","properties","damage","speed","_gameState","gameState","PLAYING","_updateGameState","onLoad","updateGameState","bind","instance","registerEvent","event","UPDATE_GAMESTATE","data","start","onCollisionEnter","other","self","a","node","group","onBulletKilled","removeEvent","destroy","update","dt","y"],"mappings":";;;;;;AAAA,IAAMA,WAAWC,QAAQ,UAAR,CAAjB;AACA,IAAMC,SAASD,QAAQ,QAAR,CAAf;AACAE,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;AAELC,gBAAY;AACRC,gBAAQ,CADA;AAERC,eAAO,CAFC;AAGRC,oBAAYR,OAAOS,SAAP,CAAiBC,OAHrB;AAIRC,0BAAkB;AAJV,KAFP;AAQLC,UARK,oBAQI;AACL,aAAKD,gBAAL,GAAwB,KAAKE,eAAL,CAAqBC,IAArB,CAA0B,IAA1B,CAAxB;AACAhB,iBAASiB,QAAT,CAAkBC,aAAlB,CAAgChB,OAAOiB,KAAP,CAAaC,gBAA7C,EAA+D,KAAKP,gBAApE;AACH,KAXI;AAYLE,mBAZK,2BAYWM,IAZX,EAYiB;AAClB,aAAKX,UAAL,GAAkBW,IAAlB;AACH,KAdI;AAeLC,SAfK,mBAeG,CAEP,CAjBI;;AAkBLC,sBAAkB,0BAAUC,KAAV,EAAiBC,IAAjB,EAAuB;AACrC,YAAIC,IAAIF,MAAMG,IAAN,CAAWC,KAAX,IAAoB,OAA5B;AACA,YAAIJ,MAAMG,IAAN,CAAWC,KAAX,IAAoB,OAAxB,EAAiC;AAC7B,iBAAKC,cAAL;AAEH;AACJ,KAxBI;AAyBLA,kBAzBK,4BAyBY;AACb7B,iBAASiB,QAAT,CAAkBa,WAAlB,CAA8B5B,OAAOiB,KAAP,CAAaC,gBAA3C,EAA6D,KAAKP,gBAAlE;AACA,aAAKc,IAAL,CAAUI,OAAV;AAEH,KA7BI;AA8BLC,UA9BK,kBA8BEC,EA9BF,EA8BM;AACP,YAAI,KAAKvB,UAAL,IAAmBR,OAAOS,SAAP,CAAiBC,OAAxC,EACI,KAAKe,IAAL,CAAUO,CAAV,IAAe,KAAKzB,KAApB;AACJ,YAAI,KAAKkB,IAAL,CAAUO,CAAV,IAAe,GAAnB,EAAwB;AACpB,iBAAKL,cAAL;AACH;AACJ;AApCI,CAAT","file":"bullet.js","sourceRoot":"../../../../assets/scripts","sourcesContent":["const mEmitter = require(\"mEmitter\");\nconst config = require(\"config\");\ncc.Class({\n    extends: cc.Component,\n    properties: {\n        damage: 1,\n        speed: 5,\n        _gameState: config.gameState.PLAYING,\n        _updateGameState: null\n    },\n    onLoad() {\n        this._updateGameState = this.updateGameState.bind(this)\n        mEmitter.instance.registerEvent(config.event.UPDATE_GAMESTATE, this._updateGameState)\n    },\n    updateGameState(data) {\n        this._gameState = data\n    },\n    start() {\n\n    },\n    onCollisionEnter: function (other, self) {\n        let a = other.node.group == \"enemy\"\n        if (other.node.group == \"enemy\") {\n            this.onBulletKilled()\n\n        }\n    },\n    onBulletKilled() {\n        mEmitter.instance.removeEvent(config.event.UPDATE_GAMESTATE, this._updateGameState)\n        this.node.destroy();\n\n    },\n    update(dt) {\n        if (this._gameState == config.gameState.PLAYING)\n            this.node.y += this.speed;\n        if (this.node.y >= 460) {\n            this.onBulletKilled()\n        }\n    },\n});\n"]}