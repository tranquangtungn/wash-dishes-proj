window.__require=function e(t,i,s){function n(r,a){if(!i[r]){if(!t[r]){var c=r.split("/");if(c=c[c.length-1],!t[c]){var h="function"==typeof __require&&__require;if(!a&&h)return h(c,!0);if(o)return o(c,!0);throw new Error("Cannot find module '"+r+"'")}}var l=i[r]={exports:{}};t[r][0].call(l.exports,function(e){return n(t[r][1][e]||e)},l,l.exports,e,t,i,s)}return i[r].exports}for(var o="function"==typeof __require&&__require,r=0;r<s.length;r++)n(s[r]);return n}({1:[function(e,t,i){function s(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function n(e){return"function"==typeof e}function o(e){return"number"==typeof e}function r(e){return"object"==typeof e&&null!==e}function a(e){return void 0===e}t.exports=s,s.EventEmitter=s,s.prototype._events=void 0,s.prototype._maxListeners=void 0,s.defaultMaxListeners=10,s.prototype.setMaxListeners=function(e){if(!o(e)||e<0||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},s.prototype.emit=function(e){var t,i,s,o,c,h;if(this._events||(this._events={}),"error"===e&&(!this._events.error||r(this._events.error)&&!this._events.error.length)){if((t=arguments[1])instanceof Error)throw t;var l=new Error('Uncaught, unspecified "error" event. ('+t+")");throw l.context=t,l}if(a(i=this._events[e]))return!1;if(n(i))switch(arguments.length){case 1:i.call(this);break;case 2:i.call(this,arguments[1]);break;case 3:i.call(this,arguments[1],arguments[2]);break;default:o=Array.prototype.slice.call(arguments,1),i.apply(this,o)}else if(r(i))for(o=Array.prototype.slice.call(arguments,1),s=(h=i.slice()).length,c=0;c<s;c++)h[c].apply(this,o);return!0},s.prototype.addListener=function(e,t){var i;if(!n(t))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,n(t.listener)?t.listener:t),this._events[e]?r(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,r(this._events[e])&&!this._events[e].warned&&(i=a(this._maxListeners)?s.defaultMaxListeners:this._maxListeners)&&i>0&&this._events[e].length>i&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace()),this},s.prototype.on=s.prototype.addListener,s.prototype.once=function(e,t){if(!n(t))throw TypeError("listener must be a function");var i=!1;function s(){this.removeListener(e,s),i||(i=!0,t.apply(this,arguments))}return s.listener=t,this.on(e,s),this},s.prototype.removeListener=function(e,t){var i,s,o,a;if(!n(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(o=(i=this._events[e]).length,s=-1,i===t||n(i.listener)&&i.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(r(i)){for(a=o;a-- >0;)if(i[a]===t||i[a].listener&&i[a].listener===t){s=a;break}if(s<0)return this;1===i.length?(i.length=0,delete this._events[e]):i.splice(s,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},s.prototype.removeAllListeners=function(e){var t,i;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(n(i=this._events[e]))this.removeListener(e,i);else if(i)for(;i.length;)this.removeListener(e,i[i.length-1]);return delete this._events[e],this},s.prototype.listeners=function(e){return this._events&&this._events[e]?n(this._events[e])?[this._events[e]]:this._events[e].slice():[]},s.prototype.listenerCount=function(e){if(this._events){var t=this._events[e];if(n(t))return 1;if(t)return t.length}return 0},s.listenerCount=function(e,t){return e.listenerCount(t)}},{}],boss:[function(e,t,i){"use strict";cc._RF.push(t,"eddb27PiEdFzYEf5nxcExb8","boss");var s=e("mEmitter"),n=e("config");cc.Class({extends:cc.Component,properties:{turret:{default:null,type:cc.Sprite},laser:{default:null,type:cc.Sprite},_gameState:null,hp_bar:{default:null,type:cc.ProgressBar},_angleTurret:0,_hpBoss:{default:50,serializable:!1},_ready:!1,_timer:0},onLoad:function(){this._gameState=n.gameState.PLAYING,this.tracking=this.trackingShip.bind(this),this.gameOver=this.gameOver.bind(this),s.instance.registerEvent("shipMoving",this.tracking),s.instance.registerEvent(n.event.GAME_OVER,this.gameOver)},updateGameState:function(e){this._gameState=e,cc.log(e)},gameOver:function(){s.instance.removeEvent(n.event.GAME_OVER,this.gameOver),this.onKilled()},onKilled:function(){s.instance.removeEvent("shipMoving",this.tracking),this.node.destroy()},trackingShip:function(e){if(cc.log(e),this._ready){this._targetPos=e;var t=Math.pow(e.x-this.node.x,2)+Math.pow(e.y-this.node.y,2),i=Math.abs(e.x-this.node.x),s=Math.sqrt(t),n=180*Math.asin(i/s)/Math.PI,o=1;e.x>this.node.x?o=-1:e.x<this.node.x&&(o=1),e.y>this.node.y&&(n=90-n+90),this._angleTurret=-n*o,this.turret.node.angle=this._angleTurret}},onCollisionEnter:function(e,t){"bullet"==e.node.group&&(cc.log(1/this._hpBoss),this.hp_bar.progress+=1/this._hpBoss,cc.log(this.hp_bar.progress),this.hp_bar.progress>=1&&this.outOfHp())},outOfHp:function(){s.instance.emit("bossout",this._hpBoss),this._ready=!1,this.node.stopAllActions(),this.onKilled()},start:function(){var e=this,t=cc.moveTo(3,{y:100,x:0}),i=cc.sequence(t,cc.callFunc(function(){cc.log(e._hpBoss),e._ready=!0}));this.node.runAction(i)},onShoot:function(){s.instance.emit("golaser",this._angleTurret)},update:function(e){this._timer+=e,this._ready&&this._timer>2&&(this.onShoot(),this._timer=0)}}),cc._RF.pop()},{config:"config",mEmitter:"mEmitter"}],bullet:[function(e,t,i){"use strict";cc._RF.push(t,"be6d12xDUdIUbpIP74EIBB1","bullet");var s=e("mEmitter"),n=e("config");cc.Class({extends:cc.Component,properties:{damage:1,speed:5,_gameState:n.gameState.PLAYING,effect_src:{default:null,type:cc.AudioClip},_action:null},action:function(e){this._action=e||cc.moveBy(1,0,800).repeatForever()},onLoad:function(){var e=this.node.parent.getComponent("game");this.effect=cc.audioEngine.play(this.effect_src,!1,e.effectVolume),this._updateGameState=this.updateGameState.bind(this),s.instance.registerEvent(n.event.UPDATE_GAMESTATE,this._updateGameState)},updateEffect:function(e){cc.log("test"),cc.audioEngine.setVolume(this.effect,e)},updateGameState:function(e){cc.log("update state"),this._gameState=e,this._gameState==n.gameState.PLAYING?this.node.resumeAllActions():this._gameState==n.gameState.PAUSE&&this.node.pauseAllActions()},start:function(){this.action(this._action),this.node.runAction(this._action)},onCollisionEnter:function(e,t){e.node.group;"enemy"==e.node.group&&this.onBulletKilled()},onBulletKilled:function(){s.instance.removeEvent(n.event.UPDATE_GAMESTATE,this._updateGameState),this.node.destroy()},update:function(e){this.node.y>=460&&this.onBulletKilled()}}),cc._RF.pop()},{config:"config",mEmitter:"mEmitter"}],config:[function(e,t,i){"use strict";cc._RF.push(t,"988d8BgEq5JFJcfUTI7SKY0","config");t.exports={event:{UPDATE_SOUND:"updateVolumn",UPDATE_EFFECT:"updateEffect",UPDATE_SCORE:"changeScore",UPDATE_GAMESTATE:"updateGameState",REMOVE_BULLET:"removeBullet",GAME_OVER:"over",ENEMY_DESTROY:"enemyDestroy",WASH_DISHES:"washdishes",GAME_WIN:"gamewin"},gameState:{READY:"ready",PLAYING:"playing",OVER:"over",PAUSE:"pause",WIN:"win"},storageKey:{SETTINGS:"settings",LEADERBOARD:"leaderBoard"}},cc._RF.pop()},{}],enemy:[function(e,t,i){"use strict";cc._RF.push(t,"d320376zONMXI1kP/M4Lxpd","enemy");var s=e("mEmitter"),n=e("config");cc.Class({extends:cc.Component,properties:{hit_frame:cc.SpriteFrame,hp:5,speed:{set:function(e){this._speed=e}},targetpos:{set:function(e){this._targetpos=e}},score:1,_sprite:null,_anim:null,_gameState:null,_updateGameState:null,_status:"move"},onLoad:function(){this._gameState=n.gameState.PLAYING,this._sprite=this.getComponent(cc.Sprite),this.colider=this.getComponent(cc.PolygonCollider),this._anim=this.getComponent(cc.Animation),this._updateGameState=this.updateGameState.bind(this),s.instance.registerEvent(n.event.UPDATE_GAMESTATE,this._updateGameState)},updateGameState:function(e){this._gameState=e,e!=n.gameState.PLAYING?this._anim.stop():this._anim.start()},onEnemyKilled:function(){s.instance.emit(n.event.ENEMY_DESTROY),s.instance.removeEvent(n.event.UPDATE_GAMESTATE,this._updateGameState),this.node.destroy()},onCollisionEnter:function(e,t){var i=this;"bullet"==e.node.group&&(this.hp-=1,0==this.hp?(this._anim.play(this._anim._clips[0]._name),cc.tween(this.node).delay(1).call(function(){s.instance.emit(n.event.UPDATE_SCORE,i.score),i.onEnemyKilled()}).start()):this._sprite.spriteFrame!==this.hit_frame&&this.hp>0&&(this._sprite.spriteFrame=this.hit_frame,this._anim.stop()))},start:function(){this.onAction()},onPause:function(){this._status="pause",this.node.stopAction(this._fly)},onAction:function(){var e=this;cc.log(this._targetpos);var t=cc.moveTo(3,this._targetpos);this._fly=cc.sequence(t,cc.callFunc(function(){e._state="idle"})),this.node.runAction(this._fly)},update:function(e){this._gameState==n.gameState.PAUSE&&"move"==this._status?this.onPause():this._gameState==n.gameState.PLAYING&&"pause"==this._status&&this.node.runAction(this._fly)}}),cc._RF.pop()},{config:"config",mEmitter:"mEmitter"}],game:[function(e,t,i){"use strict";cc._RF.push(t,"1e6b5Mb1mNORKkN2g3U+KGi","game");var s=e("./mEmitter"),n=e("config");cc.Class({extends:cc.Component,properties:{bg_1:cc.Node,bg_2:cc.Node,title:cc.Label,gameReadyLayer:cc.Node,gamePlayingLayer:cc.Node,gamePauseLayer:cc.Node,gameOverLayer:cc.Node,rankedLayer:cc.Node,settingsLayer:cc.Node,waveTitle:cc.Node,winLayer:cc.Node,helpLayer:cc.Node,_LayerList:{default:[],type:[cc.Node]},score:cc.Label,scoreOver:cc.Label,nameOver:cc.EditBox,nameWin:cc.EditBox,pre_hero:cc.Prefab,_hero:cc.Node,pre_creep:cc.Prefab,pre_assassin:cc.Prefab,pre_motherShip:cc.Prefab,pre_boss:cc.Prefab,ammoturret:cc.Prefab,pre_bullet:cc.Prefab,pre_skillBullet:cc.Prefab,pre_skillShield:cc.Prefab,chargeSkill:cc.ProgressBar,sound_src:{default:null,type:cc.AudioClip},_waveNum:{default:1,type:cc.Integer,notify:function(){this.initWave(this._waveNum)}},_isWashDishes:!1},onLoad:function(){this.initLocalStorage(),this._LayerList=[this.gameReadyLayer,this.gamePlayingLayer,this.gamePauseLayer,this.gameOverLayer,this.rankedLayer,this.settingsLayer,this.winLayer,this.helpLayer],this.settings=JSON.parse(cc.sys.localStorage.getItem(n.storageKey.SETTINGS)),this.effectVolume=this.settings.effectVolume,this.soundVolume=this.settings.soundVolume,this.sound=cc.audioEngine.play(this.sound_src,!0,this.soundVolume),s.instance=new s,cc.director.getCollisionManager().enabled=!0,this.init(),this.setTouch(),s.instance.registerEvent(n.event.UPDATE_SOUND,this.setSoundVolume.bind(this)),s.instance.registerEvent(n.event.UPDATE_EFFECT,this.setEffectVolume.bind(this)),s.instance.registerEvent(n.event.UPDATE_SCORE,this.updateScore.bind(this)),s.instance.registerEvent(n.event.GAME_OVER,this.gameFinished.bind(this))},initLocalStorage:function(){var e=JSON.parse(cc.sys.localStorage.getItem(n.storageKey.SETTINGS));e||(cc.log("no storage"),e={soundVolume:.5,effectVolume:.5,currentWave:1,currentScore:0},cc.sys.localStorage.setItem(n.storageKey.SETTINGS,JSON.stringify(e)));var t=JSON.parse(cc.sys.localStorage.getItem(n.storageKey.LEADERBOARD));t||(cc.log("no storage"),t=[{name:"quangtung",score:300},{name:"quangtung",score:290},{name:"quangtung",score:120},{name:"quangtung",score:110},{name:"quangtung",score:100},{name:"quangtung",score:50},{name:"quangtung",score:40},{name:"quangtung",score:30},{name:"quangtung",score:20}],cc.sys.localStorage.setItem(n.storageKey.LEADERBOARD,JSON.stringify(t)))},washDishes:function(){var e=this;this._isWashDishes=!0;var t=[cc.v2(-20,-20),cc.v2(-10,-10),cc.v2(0,0),cc.v2(10,-10),cc.v2(20,-20)];if(""!=this._hero.name)for(var i=function(i){var s=e._hero.getPosition(),n=cc.instantiate(e.pre_skillShield);n.parent=e.node,n.setPosition(cc.v2(s.x,s.y+e._hero.height/2));var o=n.getComponent("bullet"),r=cc.sequence(cc.spawn(cc.moveBy(.5,0,20),cc.sequence(cc.delayTime(.1*i),cc.rotateBy(.5,720))),cc.delayTime(.1*(5-i)),cc.moveBy(.1,t[i],t[i]),cc.delayTime(.4),cc.rotateBy(6,43200),cc.callFunc(function(){o.onBulletKilled(),e._isWashDishes=!1}));o.action(r);var a=cc.sequence(cc.delayTime(1.5),cc.repeat(cc.sequence(cc.spawn(cc.scaleTo(.1,1.1),cc.tintTo(.1,10,50,150)),cc.spawn(cc.scaleTo(.1,1),cc.tintTo(.1,255,255,255))),32));e._hero.runAction(a);var c=cc.sequence(cc.delayTime(1.5),cc.repeat(cc.sequence(cc.callFunc(function(){e.createKnife(i)}),cc.delayTime(.1)),64));e.node.runAction(c)},s=0;s<5;s++)i(s)},createKnife:function(e){if(""!=this._hero.name){var t=this._hero.getPosition(),i=[cc.v2(t.x-20,t.y-20+this._hero.height/2+20),cc.v2(t.x-10,t.y-10+this._hero.height/2+20),cc.v2(t.x,t.y+this._hero.height/2+20),cc.v2(t.x+10,t.y-10+this._hero.height/2+20),cc.v2(t.x+20,t.y-20+this._hero.height/2+20)],s=(Math.floor(5*Math.random()),cc.instantiate(this.pre_skillBullet));s.parent=this.node,s.setPosition(i[e]),s.angle=20-10*e;var n=s.getComponent("bullet"),o=cc.moveBy(1,-800*Math.tan(cc.misc.degreesToRadians(s.angle)),800);n.action(o)}},start:function(){},setSoundVolume:function(e){this.soundVolume=e,cc.audioEngine.setVolume(this.sound,this.soundVolume)},setEffectVolume:function(e){this.effectVolume=e},update:function(e){this.setBg(),this.gameState==n.gameState.PLAYING&&0==this._isWashDishes&&(this.bulletTime++,10==this.bulletTime&&(this.bulletTime=0,this.createBullet()))},init:function(){this.isBgMove=!1,this.bg_1.y=0,this.bg_2.y=this.bg_1.y+this.bg_1.height,this.gameReadyLayer.zIndex=1,this.gamePauseLayer.zIndex=2,this.settingsLayer.zIndex=2,this.loadLayer(this.gameReadyLayer),this.bulletTime=0,this.gameState=n.gameState.READY,this.score.string=0,this.spawnCreepTime=0,this.spawnAssasinTime=0,this.spawnMotherShipTime=0,this.level=1,this._waveStart=1,this.chargeSkill.progress=.5,this.getData(),this._isWashDishes=!1},setTouch:function(){this.node.on("touchstart",function(e){},this),this.node.on("touchmove",function(e){if(""!=this._hero.name){var t=this._hero.getPosition(),i=e.getDelta(),n=t.x+i.x,o=t.y+i.y,r=cc.v2(n,o)||cc.v2(0,-500);if(s.instance.emit("shipMoving",r),n<280&&n>-280&&o<400&&o>-400)this._hero.setPosition(cc.v2(t.x+i.x,t.y+i.y)),this.node.getComponentsInChildren("skillShield").forEach(function(e){var t=e.node.getPosition();e.node.setPosition(cc.v2(t.x+i.x,t.y+i.y))})}},this),this.node.on("touchend",function(e){cc.log("touchend")})},gameFinished:function(){this.gameState=n.gameState.OVER,this.removeAllBullet(),this.removeAllEnemy(),this.loadLayer(this.gameOverLayer),this.scoreOver.string=this.score.string;var e=this.checkLeaderBoard(Number(this.score.string));cc.log(e),this.nameOver.node.active=!!e},checkLeaderBoard:function(e){for(var t=JSON.parse(cc.sys.localStorage.getItem(n.storageKey.LEADERBOARD)),i=0;i<t.length;i++)if(cc.log(t[i].score),t[i].score<=e)return!0;return!1},saveLeaderBoard:function(){var e=JSON.parse(cc.sys.localStorage.getItem(n.storageKey.LEADERBOARD)),t="unknown";this.nameOver.string?t=this.nameOver.string:this.nameWin.string&&(t=this.nameWin.string);var i={name:t,score:Number(this.score.string)};e.pop(),e.push(i);for(var s=0;s<e.length-1;s++)for(var o=s+1;o<e.length;o++)if(e[s].score<e[o].score){var r=e[s];e[s]=e[o],e[o]=r}cc.sys.localStorage.setItem(n.storageKey.LEADERBOARD,JSON.stringify(e)),this.nameWin.string="",this.nameOver.string=""},createEnemy:function(e,t){var i=t%this.allRow,s=Math.floor(t/this.allRow),n=cc.instantiate(e);n.setPosition(0,1e3);var o=n.getComponent("enemy");o.speed=2,o.targetpos=cc.v2(100*i-100*this.allRow/2+50,100*s),n.parent=this.node},spawnHero:function(){this._hero=cc.instantiate(this.pre_hero),this._hero.parent=this.node,this._hero.setPosition(cc.v2(0,-300))},updateScore:function(e){this.score.string=Number(this.score.string)+e,this.updateLevel(),this.charge()},charge:function(){!this._isWashDishes&&this.chargeSkill.progress<1&&cc.tween(this.chargeSkill).by(.5,{progress:.1}).start()},updateLevel:function(){this.level=Math.floor(this.score.string/50)+1},setBg:function(){this.isBgMove&&(this.bg_2.y-=.5,this.bg_1.y-=.5,this.bg_1.y<=-this.bg_1.height&&(this.bg_1.y=this.bg_2.y+this.bg_1.height),this.bg_2.y<=-this.bg_2.height&&(this.bg_2.y=this.bg_1.y+this.bg_2.height))},createBullet:function(){if(""!=this._hero.name){var e=this._hero.getPosition(),t=cc.instantiate(this.pre_bullet);t.parent=this.node,t.setPosition(cc.v2(e.x,e.y+this._hero.height/2+2))}},removeAllBullet:function(){for(var e=this.node.children,t=e.length-1;t>=0;t--){var i=e[t].getComponent("bullet");i&&i.onBulletKilled()}},removeAllEnemy:function(){for(var e=this.node.children,t=e.length-1;t>=0;t--){var i=e[t].getComponent("enemy");i&&i.onEnemyKilled()}},removeHero:function(){for(var e=this.node.children,t=e.length-1;t>=0;t--){var i=e[t].getComponent("hero");i&&(cc.log("hero killed"),i.onHeroKilled())}},loadLayer:function(e){for(var t=this._LayerList.length,i=0;i<t;i++)this._LayerList[i]===e?this._LayerList[i].active=!0:this._LayerList[i].active=!1},clickBtn:function(e,t){switch(t){case"play":this.spawnHero(),this.enemydestroy=this.waveStatus.bind(this),this._waveNum=1,s.instance.registerEvent(n.event.ENEMY_DESTROY,this.enemydestroy),this.isBgMove=!0,this.loadLayer(this.gamePlayingLayer),this.gameState=n.gameState.PLAYING,s.instance.emit(n.event.UPDATE_GAMESTATE,this.gameState);break;case"resume":this.isBgMove=!0,this.loadLayer(this.gamePlayingLayer),this.gameState=n.gameState.PLAYING,s.instance.emit(n.event.UPDATE_GAMESTATE,this.gameState),this.resumeAllActions();break;case"pause":this.isBgMove=!1,this.loadLayer(this.gamePauseLayer),this.gameState=n.gameState.PAUSE,s.instance.emit(n.event.UPDATE_GAMESTATE,this.gameState),this.pauseAllActions();break;case"restart":this.isBgMove=!1,this.saveLeaderBoard(),s.instance.removeEvent(n.event.ENEMY_DESTROY,this.enemydestroy),this.loadLayer(this.gameReadyLayer),this.gameState=n.gameState.READY,this.stopAllActions(),this.removeAllBullet(),this.removeAllEnemy(),this.removeHero(),this.init();break;case"ranked":this.loadLayer(this.rankedLayer);break;case"settings":this.loadLayer(this.settingsLayer);break;case"help":this.loadLayer(this.helpLayer);break;case"back":this.gameState==n.gameState.READY?this.loadLayer(this.gameReadyLayer):this.gameState==n.gameState.PAUSE&&this.loadLayer(this.gamePauseLayer),this.saveSettings();break;case"washDishes":this.chargeSkill.progress>=1&&(this.washDishes(),cc.tween(this.chargeSkill).delay(1.5).to(6.4,{progress:0}).start())}},pauseAllActions:function(){cc.log("pause"),this.node.pauseAllActions(),this._hero.pauseAllActions(),this.chargeSkill.node.pauseAllActions()},resumeAllActions:function(){cc.log("resume"),this.node.resumeAllActions(),this._hero.resumeAllActions(),this.chargeSkill.node.resumeAllActions()},stopAllActions:function(){cc.log("resume"),this.node.stopAllActions(),this._hero.stopAllActions(),this.waveTitle.stopAllActions(),this.chargeSkill.node.stopAllActions()},saveSettings:function(){cc.log("save settings");var e={soundVolume:this.soundVolume,effectVolume:this.effectVolume,currentWave:1,currentScore:0};cc.sys.localStorage.setItem(n.storageKey.SETTINGS,JSON.stringify(e))},getData:function(){cc.log("get data"),cc.loader.loadRes("waveconfig.json",this.getWaveData.bind(this))},getWaveData:function(e,t){e?cc.log(e):(this.waveContent=t.json.wave,this.waveCount=t.json.wavecount)},initWave:function(e){var t=this;if(cc.log(e),this.updatescore=this.updateScore.bind(this),e>this.waveCount)this.gameFinished();else{var i=this.waveContent[e].content;this.totalEnemy=this.waveContent[e].enemy,this.allRow=this.waveContent[e].allRow,this.allCol=this.waveContent[e].allCol;var s="Wave "+e,n=this.waveContent[e].sologan,o=this.waveTitle.children;o[0].getComponent(cc.Label).string=s,o[1].getComponent(cc.Label).string=n;var r=cc.blink(1,3),a=cc.fadeTo(3,0),c=cc.spawn(a,cc.callFunc(function(){i.map(function(e,i){switch(e){case 1:t.createEnemy(t.pre_creep,i);break;case 2:t.createEnemy(t.pre_assassin,i);break;case 3:t.createEnemy(t.pre_motherShip,i);break;case 5:t.createBoss(t.pre_boss,i)}})})),h=cc.sequence(r,c);this.waveTitle.runAction(h)}},waveStatus:function(){this.gameState==n.gameState.PLAYING&&(this.totalEnemy--,cc.log(this.totalEnemy),cc.log(s.instance),0==this.totalEnemy&&this._waveNum++)},onWin:function(e){var t=this;this.gameState=n.gameState.WIN,this.loadLayer(this.winLayer),this.updateScore(e),this.winLayer.children.map(function(e){"totalscore"==e.name&&(e.getComponent(cc.Label).string="Score: "+t.score.string)}),this._hero.destroy(),this.removeAllBullet()},onBossShoot:function(e){var t=cc.instantiate(this.ammoturret);t.angle=e-90,t.setPosition(cc.v2(0,80)),t.parent=this.node,cc.tween(t).to(.5,{y:this._hero.y,x:this._hero.x}).call(function(){t.destroy()}).start()},createBoss:function(e,t){this.allRow,Math.floor(t/this.allRow);var i=cc.instantiate(e);i.setPosition(0,-1e3),i.parent=this.node,s.instance.registerEvent("bossout",this.onWin.bind(this)),s.instance.registerEvent("golaser",this.onBossShoot.bind(this))}}),cc._RF.pop()},{"./mEmitter":"mEmitter",config:"config"}],hero:[function(e,t,i){"use strict";cc._RF.push(t,"c58188CA11DBJcntZNGRtuq","hero");var s=e("mEmitter"),n=e("config");cc.Class({extends:cc.Component,properties:{hit_frame:cc.SpriteFrame,_sprite:null,_anim_down:null},onLoad:function(){this._sprite=this.getComponent(cc.Sprite),this.colider=this.getComponent(cc.PolygonCollider),this._anim_down=this.getComponent(cc.Animation)},start:function(){},onCollisionEnter:function(e,t){var i=this;"enemy"!=e.node.group&&"ammo"!=e.node.group||(this._anim_down.play("hero_destroy"),cc.tween(this.node).delay(1).call(function(){i.onHeroKilled()}).start())},onHeroKilled:function(){s.instance.emit(n.event.GAME_OVER),this.node.destroy()}}),cc._RF.pop()},{config:"config",mEmitter:"mEmitter"}],leaderBoard:[function(e,t,i){"use strict";cc._RF.push(t,"b8e81o36qpFxJtlUD0w8cyg","leaderBoard");var s=e("config");cc.Class({extends:cc.Component,properties:{content:cc.Node,pre_item:cc.Prefab},onLoad:function(){this.leaderBoard=JSON.parse(cc.sys.localStorage.getItem(s.storageKey.LEADERBOARD)),this.initLeaderBoard()},initLeaderBoard:function(){for(var e=this.leaderBoard.length,t=0;t<e;t++){var i=cc.instantiate(this.pre_item);i.parent=this.content;var s=i.children[0].getComponent(cc.Label),n=i.children[1].getComponent(cc.Label),o=i.children[2].getComponent(cc.Label);s.string=t+1+".",n.string=this.leaderBoard[t].name,o.string=this.leaderBoard[t].score}},start:function(){},scroll:function(){}}),cc._RF.pop()},{config:"config"}],mEmitter:[function(e,t,i){"use strict";cc._RF.push(t,"68dacJAu0xG3YCxxTQvE4dC","mEmitter");var s=function(){function e(e,t){for(var i=0;i<t.length;i++){var s=t[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,i,s){return i&&e(t.prototype,i),s&&e(t,s),t}}();function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=e("events"),r=function(){function e(){n(this,e),this._emiter=new o,this._emiter.setMaxListeners(200)}return s(e,[{key:"emit",value:function(){var e;(e=this._emiter).emit.apply(e,arguments)}},{key:"registerEvent",value:function(e,t){this._emiter.on(e,t)}},{key:"registerOnce",value:function(e,t){this._emiter.once(e,t)}},{key:"removeEvent",value:function(e,t){this._emiter.removeListener(e,t)}},{key:"detroy",value:function(){this._emiter.removeAllListeners(),this._emiter=null,e.instance=null}}]),e}();r.instance=null,t.exports=r,cc._RF.pop()},{events:1}],settings:[function(e,t,i){"use strict";cc._RF.push(t,"d948apsIutJyIYjN50I9aQH","settings");var s=e("./mEmitter"),n=e("config");cc.Class({extends:cc.Component,properties:{soundSlider:cc.Slider,effectSlider:cc.Slider,muteAllToggle:cc.Toggle},onLoad:function(){cc.log("hello")},setSound:function(){s.instance.emit(n.event.UPDATE_SOUND,this.soundSlider.progress)},setEffect:function(){s.instance.emit(n.event.UPDATE_EFFECT,this.effectSlider.progress)},muteAll:function(){this.muteAllToggle.isChecked?(s.instance.emit(n.event.UPDATE_SOUND,0),s.instance.emit(n.event.UPDATE_EFFECT,0)):(this.setEffect(),this.setSound())},start:function(){}}),cc._RF.pop()},{"./mEmitter":"mEmitter",config:"config"}],skillShield:[function(e,t,i){"use strict";cc._RF.push(t,"a9a96MMB6JOBZbIqsEK7Cme","skillShield");var s=e("bullet");cc.Class({extends:s,properties:{}}),cc._RF.pop()},{bullet:"bullet"}]},{},["boss","bullet","skillShield","config","enemy","game","hero","leaderBoard","mEmitter","settings"]);